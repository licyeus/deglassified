/**
 * Angular Error Box - Angular directive providing basic timer/blinking functionality to Foundation 5 alert boxes.
 * @version v1.0.4
 * @link http://andrelevi.github.io/angular-error-box/
 * @license MIT
 */
angular.module("angularErrorBox",[]).directive("errorBox",["$timeout","$exceptionHandler",function($timeout,$exceptionHandler){return{restrict:"AE",template:"<div ng-if='errors && errors.length > 0' class='error-box alert-box {{animationClasses}} {{classes}}'><span class='error-message' ng-repeat='error in errors'>{{error}}<span ng-if='spacing && $index != errors.length - 1' class='message-space'></span></span><div ng-if='closable'><a class='close' ng-click='closeErrorBox()'>&times;</a></div></div>",scope:!0,link:function(scope,element,attrs){function setErrorsOnScope(errors){scope.errors=convertElementsIntoStrings(errors)}function convertElementsIntoStrings(errors){for(var i=0;i<errors.length;i++)"string"!=typeof errors[i]&&(errors[i]=String(errors[i]));return errors}function clearExistingTimeouts(){fadeOutTimeout&&$timeout.cancel(fadeOutTimeout),nullContentTimeout&&$timeout.cancel(nullContentTimeout)}function setFadeinClass(){scope.animationClasses="eb-fade-in",setTimeoutToClearAnimationClass()}function setTimeoutToClearAnimationClass(){$timeout(function(){scope.animationClasses=null},ANIMATION_TIME)}function setFadeoutTimeout(){fadeOutTimeout=$timeout(function(){scope.animationClasses="eb-fade-out",nullContentTimeout=$timeout(function(){scope.errors=void 0},ANIMATION_TIME)},+attrs.timer)}var classes=[];if(attrs.closable&&(scope.closable=!0),attrs.color)switch(attrs.color){case"red":classes.push("alert");break;case"orange":classes.push("warning");break;case"blue":break;case"light-blue":classes.push("info");break;case"green":classes.push("success")}else classes.push("alert");if(attrs.border&&classes.push(attrs.border),attrs.padding)switch(attrs.padding){case"none":classes.push("padding-none");break;case"tiny":classes.push("padding-tiny");break;case"small":classes.push("padding-small");break;case"medium":break;case"large":classes.push("padding-large")}if(attrs.fontSize)switch(attrs.fontSize){case"tiny":classes.push("font-tiny");break;case"small":break;case"medium":classes.push("font-medium");break;case"large":classes.push("font-large")}if(attrs.marginBottom)switch(attrs.marginBottom){case"none":classes.push("margin-bottom-none");break;case"small":classes.push("margin-bottom-small");break;case"medium":classes.push("margin-bottom-medium");break;case"large":classes.push("margin-bottom-large")}else classes.push("margin-bottom-medium");if(attrs.marginTop)switch(attrs.marginTop){case"none":classes.push("margin-top-none");break;case"small":classes.push("margin-top-small");break;case"medium":classes.push("margin-top-medium");break;case"large":classes.push("margin-top-large")}else classes.push("margin-top-medium");if(attrs.messageSpacing)switch("none"!==attrs.messageSpacing&&(scope.spacing=!0),attrs.messageSpacing){case"none":break;case"small":classes.push("message-spacing-small");break;case"medium":classes.push("message-spacing-medium");break;case"large":classes.push("message-spacing-large")}else scope.spacing=!0,classes.push("message-spacing-small");attrs.class&&classes.push(attrs.class),scope.classes=classes.join(" ");var fadeOutTimeout,nullContentTimeout,ANIMATION_TIME=500;scope.$watch(attrs.errorBox,function(errors){return Array.isArray(errors)?(setErrorsOnScope(errors),clearExistingTimeouts(),setFadeinClass(),void(attrs.timer&&setFadeoutTimeout())):void(void 0!==errors&&$exceptionHandler("error-box='' only accepts arrays. error-box was passed: "+errors))}),scope.closeErrorBox=function(){clearExistingTimeouts(),scope.errors=null}}}}]);